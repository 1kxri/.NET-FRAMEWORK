using System;
using System.Text.RegularExpressions;
using System.Windows.Forms;

namespace LAB_4.NET_WF
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            listBox1.Items.Clear();

            if (string.IsNullOrWhiteSpace(textBox1.Text))
            {
                MessageBox.Show("Введите модель вертолёта.", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (!int.TryParse(textBox2.Text, out int seats) || seats <= 0)
            {
                MessageBox.Show("Введите корректное количество мест (целое положительное число).", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (!double.TryParse(textBox3.Text, out double speed) || speed <= 0)
            {
                MessageBox.Show("Введите корректную максимальную скорость (положительное число).", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            string[] helicopter = new string[]
            {
                $"Модель: {textBox1.Text.Trim()}",
                $"Мест: {seats}",
                $"Макс. скорость: {speed} км/ч"
            };

            if (string.IsNullOrWhiteSpace(textBox4.Text))
            {
                MessageBox.Show("Введите название завода.", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (!int.TryParse(textBox5.Text, out int workers) || workers <= 0)
            {
                MessageBox.Show("Введите корректное количество работников (целое положительное число).", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (!int.TryParse(textBox6.Text, out int year) || year > DateTime.Now.Year)
            {
                MessageBox.Show($"Введите корректный год основания (не позже {DateTime.Now.Year}).", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            string[] factory = new string[]
            {
                $"Завод: {textBox4.Text.Trim()}",
                $"Рабочих: {workers}",
                $"Год основания: {year}"
            };

            if (string.IsNullOrWhiteSpace(textBox7.Text))
            {
                MessageBox.Show("Введите ФИО преподавателя.", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (!Regex.IsMatch(textBox7.Text.Trim(), @"^[А-Яа-яЁё\s]+$"))
            {
                MessageBox.Show("ФИО преподавателя должно содержать только буквы и пробелы.", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (string.IsNullOrWhiteSpace(textBox8.Text))
            {
                MessageBox.Show("Введите предмет преподавателя.", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (!Regex.IsMatch(textBox8.Text.Trim(), @"^[А-Яа-яЁё\s]+$"))
            {
                MessageBox.Show("Навзвание предмета должно содержать только буквы и пробелы.", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (!int.TryParse(textBox9.Text, out int experience) || experience < 0)
            {
                MessageBox.Show("Введите корректный стаж преподавателя (0 или больше).", "Ошибка", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            string[] teacher = new string[]
            {
                $"ФИО: {textBox7.Text.Trim()}",
                $"Предмет: {textBox8.Text.Trim()}",
                $"Стаж: {experience} лет"
            };

            string[][] jaggedArray = new string[3][];
            jaggedArray[0] = helicopter;
            jaggedArray[1] = factory;
            jaggedArray[2] = teacher;

            string[] titles = { "Вертолёт", "Завод", "Преподаватель" };

            for (int i = 0; i < jaggedArray.Length; i++)
            {
                listBox1.Items.Add($"=== {titles[i]} ===");
                for (int j = 0; j < jaggedArray[i].Length; j++)
                {
                    listBox1.Items.Add($"  {jaggedArray[i][j]}");
                }
                listBox1.Items.Add("");
            }
        }
    }
}
